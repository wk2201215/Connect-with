CREATE TABLE photograph(
    photograph_id   INT(7) AUTO_INCREMENT NOT NULL,
    photograph_path VARCHAR(40)           NOT NULL,
    PRIMARY KEY(photograph_id)
);

CREATE TABLE category(
    category_id   INT(3) AUTO_INCREMENT NOT NULL,
    category_name VARCHAR(20)           NOT NULL,
    PRIMARY KEY(category_id)
);

CREATE TABLE account(
    account_id        INT(6) AUTO_INCREMENT      NOT NULL,
    account_password  VARCHAR(200)               NOT NULL,
    mail_address      VARCHAR(40)                NOT NULL,
    account_name      VARCHAR(40)                NOT NULL,
    photograph_id     INT(7)                     NOT NULL,
    self_introduction VARCHAR(500)               NOT NULL,
    category_id       INT(3)                     NOT NULL,
    authority         TINYINT                    NOT NULL,
    delete_flag       BIT(1) DEFAULT 0           NOT NULL,
    PRIMARY KEY(account_id),
    FOREIGN KEY(photograph_id) REFERENCES photograph(photograph_id),
    FOREIGN KEY(category_id) REFERENCES category(category_id)
);


CREATE TABLE post(
    post_id       INT(7) AUTO_INCREMENT              NOT NULL,
    account_id    INT(6)                             NOT NULL,
    category_id   INT(3)                             NOT NULL,
    post_time     DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
    post_content  VARCHAR(40)                        NOT NULL,
    photograph_id INT(7) DEFAULT NULL                        ,
    good_count    INT(6) DEFAULT 0                   NOT NULL,
    reply_id      INT(7) DEFAULT NULL                        ,
    delete_flag   BIT(1) DEFAULT 0                   NOT NULL,
    PRIMARY KEY(post_id),
    FOREIGN KEY(account_id)    REFERENCES account(account_id),
    FOREIGN KEY(photograph_id) REFERENCES photograph(photograph_id),
    FOREIGN KEY(category_id)   REFERENCES category(category_id),
    FOREIGN KEY(reply_id) REFERENCES post(post_id)
);


CREATE TABLE good(
    post_id       INT(7)                             NOT NULL,
    account_id    INT(6)                             NOT NULL,
    
    post_time     DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,

    PRIMARY KEY(post_id,account_id),
    FOREIGN KEY(post_id)    REFERENCES post(post_id),
    FOREIGN KEY(account_id)    REFERENCES account(account_id)
);


CREATE TABLE account_tentative(
    account_name      VARCHAR(40)                NOT NULL,
    account_password  VARCHAR(200)               NOT NULL,
    mail_address      VARCHAR(40)                NOT NULL,
    PRIMARY KEY(account_name,account_password,mail_address)
);